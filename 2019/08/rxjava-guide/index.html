<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        RxJavaå…¥é—¨ - èµµå°é»‘çš„åšå®¢
      </title>
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  
  <meta name="theme-color" content="#000000" />
  
  <meta http-equiv="window-target" content="_top" />
  
  
  <meta name="keywords"
    content="å­¦ä¹ ç¬”è®°, rust, èƒŒå‹, backpressure, å“åº”å¼ç¼–ç¨‹" /><meta name="description" content="rxjavaå…¥é—¨ èƒŒå‹ è§‚å¯Ÿè€…æ¨¡å¼ map flatmap zip å“åº”å¼ç¼–ç¨‹" />
  <meta name="generator" content="Hugo 0.58.0 with theme pure" />
  <title>RxJavaå…¥é—¨ - èµµå°é»‘çš„åšå®¢</title>
  

  <link rel="stylesheet" href="https://xiaohei.im/css/style.css">
  <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css"> 
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <meta property="og:title" content="RxJavaå…¥é—¨" />
<meta property="og:description" content="rxjavaå…¥é—¨ èƒŒå‹ è§‚å¯Ÿè€…æ¨¡å¼ map flatmap zip å“åº”å¼ç¼–ç¨‹" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiaohei.im/2019/08/rxjava-guide/" />
<meta property="article:published_time" content="2019-08-21T16:09:48+08:00" />
<meta property="article:modified_time" content="2019-08-21T16:09:48+08:00" />
<meta itemprop="name" content="RxJavaå…¥é—¨">
<meta itemprop="description" content="rxjavaå…¥é—¨ èƒŒå‹ è§‚å¯Ÿè€…æ¨¡å¼ map flatmap zip å“åº”å¼ç¼–ç¨‹">


<meta itemprop="datePublished" content="2019-08-21T16:09:48&#43;08:00" />
<meta itemprop="dateModified" content="2019-08-21T16:09:48&#43;08:00" />
<meta itemprop="wordCount" content="3856">



<meta itemprop="keywords" content="rxjava,å“åº”å¼ç¼–ç¨‹," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="RxJavaå…¥é—¨"/>
<meta name="twitter:description" content="rxjavaå…¥é—¨ èƒŒå‹ è§‚å¯Ÿè€…æ¨¡å¼ map flatmap zip å“åº”å¼ç¼–ç¨‹"/>

  <!--[if lte IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
    <![endif]-->

  <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->

</head>
  </head>
  <body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader">
    <div class="slimContent">
      <div class="navbar-header">
        <div class="profile-block text-center">
          <a id="avatar" href="https://github.com/xiaoheiAh" target="_blank">
            <img class="img-circle img-rotate" src="https://xiaohei.im/avatar.png" width="200" height="200">
          </a>
          <h2 id="name" class="hidden-xs hidden-sm">èµµå°é»‘</h2>
          <h3 id="title" class="hidden-xs hidden-sm hidden-md">Java Developer</h3>
          <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>Shanghai, China</small>
        </div><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="æœç´¢" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav  menu-highlight">
            <li class="menu-item menu-item-home">
                <a href="/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">ä¸»é¡µ</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/posts">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">å½’æ¡£</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/categories">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">åˆ†ç±»</span>
                </a>
            </li>
            <li class="menu-item menu-item-tags">
                <a href="/tags">
                    <i class="icon icon-tags"></i>
                  <span class="menu-title">æ ‡ç­¾</span>
                </a>
            </li>
            <li class="menu-item menu-item-about">
                <a href="/about">
                    <i class="icon icon-cup-fill"></i>
                  <span class="menu-title">å…³äº</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>
  <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">å…¬å‘Š</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content"><p>è‡ªç”¨ç§‘å­¦ä¸Šç½‘èŠ‚ç‚¹æ¨è(ä¾¿å®œåˆå¥½ç”¨)<a href="https://tianlinzhao.com/aff.php?aff=4969" target="_blank" style="background-color:#FFFF00">ç‚¹è¿™é‡Œè·³è½¬</a>
            </div>
        </div>
    </div>
</div>

      <div class="widget">
    <h3 class="widget-title"> åˆ†ç±»</h3>
    <div class="widget-body">
        <ul class="category-list">
            <li class="category-list-item"><a href="https://xiaohei.im/categories/corejava/" class="category-list-link">corejava</a><span class="category-list-count">7</span></li>
            <li class="category-list-item"><a href="https://xiaohei.im/categories/hystrix/" class="category-list-link">hystrix</a><span class="category-list-count">2</span></li>
            <li class="category-list-item"><a href="https://xiaohei.im/categories/leetcode/" class="category-list-link">leetcode</a><span class="category-list-count">3</span></li>
            <li class="category-list-item"><a href="https://xiaohei.im/categories/redis/" class="category-list-link">redis</a><span class="category-list-count">5</span></li>
            <li class="category-list-item"><a href="https://xiaohei.im/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" class="category-list-link">æ¶ˆæ¯é˜Ÿåˆ—</a><span class="category-list-count">4</span></li>
        </ul>
    </div>
</div>
      <div class="widget">
    <h3 class="widget-title"> æ ‡ç­¾</h3>
    <div class="widget-body">
        <ul class="tag-list">
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/collections/" class="tag-list-link">collections</a><span
                    class="tag-list-count">7</span></li>
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/hugo/" class="tag-list-link">hugo</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/hystrix/" class="tag-list-link">hystrix</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/leetcode/" class="tag-list-link">leetcode</a><span
                    class="tag-list-count">3</span></li>
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/rabbitmq/" class="tag-list-link">rabbitmq</a><span
                    class="tag-list-count">4</span></li>
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/redis/" class="tag-list-link">redis</a><span
                    class="tag-list-count">5</span></li>
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/rust/" class="tag-list-link">rust</a><span
                    class="tag-list-count">4</span></li>
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/rxjava/" class="tag-list-link">rxjava</a><span
                    class="tag-list-count">2</span></li>
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/" class="tag-list-link">åˆ†å¸ƒå¼é”</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/" class="tag-list-link">å“åº”å¼ç¼–ç¨‹</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://xiaohei.im/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="tag-list-link">æ•°æ®ç»“æ„</a><span
                    class="tag-list-count">1</span></li>
            
        </ul>

    </div>
</div>
      
  </div>
</aside>

    
    
  <aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
    <div class="slimContent">
      <nav id="toc" class="article-toc">
        <h3 class="toc-title">æ–‡ç« ç›®å½•</h3>
        <div class="toc-content always-active"><nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#å‰è¨€">å‰è¨€</a></li>
<li><a href="#rxjavaæ˜¯ä»€ä¹ˆ">RxJavaæ˜¯ä»€ä¹ˆ</a>
<ul>
<li><a href="#reactive-x">Reactive X</a></li>
<li><a href="#æ¦‚å¿µ">æ¦‚å¿µ</a></li>
<li><a href="#hot-or-cold-observables">&ldquo;Hot&rdquo; or &ldquo;Cold&rdquo; Observables</a></li>
</ul></li>
<li><a href="#rxjavaå…¥é—¨">RxJavaå…¥é—¨</a>
<ul>
<li><a href="#hello-world">Hello World</a></li>
<li><a href="#æ“ä½œç¬¦-operators">æ“ä½œç¬¦ Operators</a>
<ul>
<li><a href="#åˆ›å»ºå‹æ“ä½œç¬¦">åˆ›å»ºå‹æ“ä½œç¬¦</a>
<ul>
<li><a href="#create">Create</a></li>
<li><a href="#defer">Defer</a></li>
<li><a href="#just">Just</a></li>
<li><a href="#interval">Interval</a>
<ul>
<li><a href="#å‚æ•°">å‚æ•°</a></li>
</ul></li>
</ul></li>
<li><a href="#è½¬æ¢æ“ä½œç¬¦">è½¬æ¢æ“ä½œç¬¦</a>
<ul>
<li><a href="#buffer">Buffer</a></li>
</ul></li>
<li><a href="#åˆå¹¶æ“ä½œç¬¦">åˆå¹¶æ“ä½œç¬¦</a>
<ul>
<li><a href="#zip">Zip</a></li>
</ul></li>
<li><a href="#èƒŒå‹æ“ä½œç¬¦">èƒŒå‹æ“ä½œç¬¦</a>
<ul>
<li><a href="#èƒŒå‹æ”¯æŒ">èƒŒå‹æ”¯æŒ</a></li>
<li><a href="#onbackpressurebuffer-onbackpressuredrop">onBackpressurebuffer/onBackpressureDrop</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#æ€»ç»“">æ€»ç»“</a></li>
<li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
</ul></li>
</ul>
</nav>
        </div>
      </nav>
    </div>
  </aside>
<main class="main" role="main"><div class="content">
  <article id="-" class="article article-type-" itemscope
    itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      <h1 itemprop="name">
  <a
    class="article-title"
    href="/2019/08/rxjava-guide/"
    >RxJavaå…¥é—¨</a
  >
</h1>

      <div class="article-meta">
        <span class="article-date">
  <i class="icon icon-calendar-check"></i>
<a href="https://xiaohei.im/2019/08/rxjava-guide/" class="article-date">
  <time datetime="2019-08-21 16:09:48 &#43;0800 CST" itemprop="datePublished">2019-08-21</time>
</a>
</span><span class="article-category">
  <i class="icon icon-folder"></i>
  <a class="article-category-link" href="/categories/hystrix/"> Hystrix </a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>
    <a class="article-tag-link" href="/tags/rxjava/"> rxjava </a>
    <a class="article-tag-link" href="/tags/%E5%93%8D%E5%BA%94%E5%BC%8F%E7%BC%96%E7%A8%8B/"> å“åº”å¼ç¼–ç¨‹ </a>
  </span>

	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>
        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2019/08/rxjava-guide/#comments"
            class="article-comment-link">è¯„è®º</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">å­—æ•°ç»Ÿè®¡:3856å­—</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">é˜…è¯»æ—¶é•¿:8åˆ† </span>
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      <blockquote>
<p>æœ¬æ–‡åŸºäº rxjava 1.x ç‰ˆæœ¬</p>
</blockquote>

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>å†™è¿™ç¯‡æ–‡ç« æ˜¯å› ä¸ºä¹‹å‰åœ¨çœ‹Hystrixæ—¶,è§‰å¾—å“åº”å¼ç¼–ç¨‹å¾ˆæœ‰æ„æ€,ä¹‹å‰ä¹Ÿäº†è§£åˆ°Spring5ä¸»æ‰“ç‰¹æ€§å°±æ˜¯å“åº”å¼,å°±æƒ³æ¥è¯•è¯•æ°´,å…¥ä¸ªé—¨.æœ¬æ–‡ä¸»è¦ä»‹ç»RxJavaçš„ç‰¹ç‚¹,å…¥é—¨æ“ä½œ</p>

<h2 id="rxjavaæ˜¯ä»€ä¹ˆ">RxJavaæ˜¯ä»€ä¹ˆ</h2>

<h3 id="reactive-x">Reactive X</h3>

<p><code>ReactiveX</code>æ˜¯ä½¿ç”¨<code>Observable</code>åºåˆ—æ¥ç»„åˆå¼‚æ­¥æ“ä½œä¸”åŸºäºäº‹ä»¶é©±åŠ¨çš„ä¸€ä¸ªåº“.å…¶ç»§æ‰¿è‡ª<a href="https://zh.wikipedia.org/wiki/è§‚å¯Ÿè€…æ¨¡å¼">è§‚å¯Ÿè€…æ¨¡å¼</a>æ¥æ”¯æŒæ•°æ®æµæˆ–è€…äº‹ä»¶æµé€šè¿‡æ·»åŠ æ“ä½œç¬¦(operators)çš„æ–¹å¼æ¥å£°æ˜å¼çš„æ“ä½œ,å¹¶æŠ½è±¡å‡ºå¯¹ä½çº§åˆ«çº¿ç¨‹(low-level thread),åŒæ­¥,çº¿ç¨‹å®‰å…¨,å¹¶å‘æ•°æ®ç»“æ„,éé˜»å¡IOé—®é¢˜çš„å…³æ³¨.</p>

<p>ReactiveX åœ¨ä¸åŒè¯­è¨€ä¸­éƒ½æœ‰å®ç°,RxJava åªæ˜¯åœ¨JVMä¸Šå®ç°çš„ä¸€å¥—ç½¢äº†.</p>

<h3 id="æ¦‚å¿µ">æ¦‚å¿µ</h3>

<blockquote>
<p>è§‚å¯Ÿè€…æ¨¡å¼æ˜¯è¯¥æ¡†æ¶çš„çµé­‚~</p>
</blockquote>

<p><img src="https://i.loli.net/2019/08/21/PT56HZ2obO8vU3V.png" alt="WX20190821-171445.png" /></p>

<p>ä¸Šå›¾å¯ä»¥è¡¨è¿°ä¸º: <strong>è§‚å¯Ÿè€…</strong>(Observer) <strong>è®¢é˜…</strong>(subscribe)<strong>è¢«è§‚å¯Ÿè€…</strong>(Observable),å½“Observableäº§ç”Ÿäº‹ä»¶æˆ–æ•°æ®æ—¶,ä¼šè°ƒç”¨Observerçš„æ–¹æ³•è¿›è¡Œå›è°ƒ.</p>

<p>å¬èµ·æ¥æœ‰ç‚¹åˆ«æ‰­,è¿™é‡Œä¸¾ä¸€ä¸ªå½¢è±¡ç‚¹çš„ä¾‹å­.</p>

<p><strong>æ˜¾ç¤ºå™¨å¼€å…³</strong></p>

<p>æ˜¾ç¤ºå™¨å¼€å…³å³ä¸º Observable, æ˜¾ç¤ºå™¨ä¸º Observer,è¿™ä¸¤ä¸ªç»„ä»¶å°±ä¼šå½¢æˆè”ç³».å½“å¼€å…³æŒ‰ä¸‹æ—¶,æ˜¾ç¤ºå™¨å°±ä¼šé€šç”µç‚¹äº®,è¿™é‡Œå³å¯æŠ½è±¡æˆObservableå‘å‡ºä¸€ä¸ªäº‹ä»¶,Observerå¯¹äº‹ä»¶åšäº†å¤„ç†.åšä»€ä¹ˆæ ·çš„å¤„ç†å…¶å®åœ¨Subscribeæ—¶å°±å·²ç»å†³å®šäº†.</p>

<p><strong>å›è°ƒæ–¹æ³•</strong></p>

<p>åœ¨subscribeæ—¶ä¼šè¦æ±‚å®ç°å¯¹åº”çš„å›è°ƒæ–¹æ³•,æ ‡å‡†æ–¹æ³•æœ‰ä»¥ä¸‹ä¸‰ä¸ª:</p>

<ul>
<li><strong>onNext</strong></li>
</ul>

<p>Observableè°ƒç”¨è¿™ä¸ªæ–¹æ³•å‘å°„æ•°æ®ï¼Œæ–¹æ³•çš„å‚æ•°å°±æ˜¯Observableå‘å°„çš„æ•°æ®ï¼Œè¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ï¼Œå–å†³äºä½ çš„å®ç°ã€‚</p>

<ul>
<li><strong>onError</strong></li>
</ul>

<p>å½“Observableé‡åˆ°é”™è¯¯æˆ–è€…æ— æ³•è¿”å›æœŸæœ›çš„æ•°æ®æ—¶ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªè°ƒç”¨ä¼šç»ˆæ­¢Observableï¼Œåç»­ä¸ä¼šå†è°ƒç”¨onNextå’ŒonCompletedï¼ŒonErroræ–¹æ³•çš„å‚æ•°æ˜¯æŠ›å‡ºçš„å¼‚å¸¸ã€‚</p>

<ul>
<li><strong>onCompleted</strong></li>
</ul>

<p>æ­£å¸¸ç»ˆæ­¢ï¼Œå¦‚æœæ²¡æœ‰é‡åˆ°é”™è¯¯ï¼ŒObservableåœ¨æœ€åä¸€æ¬¡è°ƒç”¨onNextä¹‹åè°ƒç”¨æ­¤æ–¹æ³•ã€‚</p>

<h3 id="hot-or-cold-observables">&ldquo;Hot&rdquo; or &ldquo;Cold&rdquo; Observables</h3>

<p>Observableä½•æ—¶å¼€å§‹å‘é€æ•°æ®å‘¢?åŸºäºæ­¤é—®é¢˜,å¯ä»¥å°†Observableåˆ†ä¸ºä¸¤ç±»: <code>Hot</code> &amp; <code>Cold</code> . å¯ä»¥ç†è§£ä¸ºä¸»åŠ¨å‹å’Œè¢«åŠ¨å‹.</p>

<p><strong>Hot Observable</strong>: Observableä¸€ç»åˆ›å»º,å°±ä¼šå¼€å§‹å‘é€æ•°æ®. æ‰€ä»¥åé¢è®¢é˜…çš„Observerå¯èƒ½æ¶ˆè´¹ä¸åˆ°Observableå®Œæ•´çš„æ•°æ®.</p>

<p><strong>Cold Observable</strong>: Observableä¼šç­‰åˆ°æœ‰Observerè®¢é˜…æ—¶æ‰å¼€å§‹å‘é€æ•°æ®,æ­¤æ—¶Observerä¼šæ¶ˆè´¹åˆ°å®Œæ•´çš„æ•°æ®</p>

<h2 id="rxjavaå…¥é—¨">RxJavaå…¥é—¨</h2>

<h3 id="hello-world">Hello World</h3>

<pre><code class="language-java">Observable.create(new Observable.OnSubscribe&lt;String&gt;() {
    @Override
    public void call(Subscriber&lt;? super String&gt; subscriber) {
      subscriber.onNext(&quot;Hello World&quot;);
      subscriber.onCompleted();
      //subscriber.onError(new RuntimeException(&quot;error&quot;));
    }
  	}).subscribe(new Subscriber&lt;String&gt;() {
    @Override
    public void onCompleted() {
      System.out.println(&quot;è§‚å¯Ÿç»“æŸå•¦~~~&quot;);
    }

    @Override
    public void onError(Throwable e) {
      System.out.println(&quot;è§‚å¯Ÿå‡ºé”™å•¦~~~&quot;);
    }

    @Override
    public void onNext(String s) {
      System.out.println(&quot;onNext:&quot; + s);
    }
  });
}
</code></pre>

<pre><code class="language-java">// onNext:Hello World
// è§‚å¯Ÿç»“æŸå•¦~~~
// æ³¨é‡Šæ‰ä¸Šä¸€è¡Œ æ‰“å¼€ä¸‹ä¸€è¡Œæ³¨é‡Š å°±ä¼šè¾“å‡º
// onNext:Hello World
// è§‚å¯Ÿå‡ºé”™å•¦~~~
</code></pre>

<p>ä¸Šè¿°å³ä¸ºä¸€ä¸ªæ ‡å‡†çš„åˆ›å»ºè§‚å¯Ÿè€…è¢«è§‚å¯Ÿè€…å¹¶è®¢é˜…,å®ç°è®¢é˜…é€»è¾‘.</p>

<p><strong>ç–‘é—®</strong></p>

<ol>
<li>ä¸ºä»€ä¹ˆ<code>subscribe</code>æ–¹æ³•çš„å‚æ•°æ˜¯<code>Subscriber</code>å‘¢?</li>
</ol>

<p>åœ¨rxjavaä¸­Observeræ˜¯æ¥å£,Subscriberå®ç°äº†Observerå¹¶æä¾›äº†æ‹“å±•.æ‰€ä»¥æ™®éç”¨è¿™ä¸ª.</p>

<ol>
<li>ä¸ºä»€ä¹ˆæ˜¯Observable.subscribe(Observer)?ç”¨ä¸Šé¢çš„æ˜¾ç¤ºå™¨å¼€å…³çš„ä¾‹å­æ¥è¯´å°±ç›¸å½“äºæ˜¾ç¤ºå™¨å¼€å…³è®¢é˜…æ˜¾ç¤ºå™¨.</li>
</ol>

<p>ä¸ºäº†ä¿è¯æµå¼é£æ ¼~rxjavaæä¾›äº†ä¸€ç³»åˆ—çš„æ“ä½œç¬¦æ¥å¯¹Observableå‘å‡ºçš„æ•°æ®åšå¤„ç†,æµå¼é£æ ¼å¯ä»¥ä½¿æ“ä½œç¬¦ä½¿ç”¨èµ·æ¥æ›´å‹å¥½.æ‰€ä»¥å°±å½“åšObservableè®¢é˜…äº†Observerå§ğŸ¤¦â€â™‚</p>

<h3 id="æ“ä½œç¬¦-operators">æ“ä½œç¬¦ Operators</h3>

<p>å•çº¯çš„ä½¿ç”¨ä¸Šé¢çš„<code>Hello World</code>æ’¸ç åªèƒ½è¯´æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„è¿ç”¨ç½¢äº†,æ“ä½œç¬¦æ‰æ˜¯<code>ReactiveX</code>æœ€å¼ºå¤§çš„åœ°æ–¹.æˆ‘ä»¬å¯ä»¥é€šè¿‡åŠŸèƒ½ä¸åŒçš„æ“ä½œç¬¦å¯¹Observableå‘å‡ºçš„æ•°æ®åšè¿‡æ»¤(filter),è½¬æ¢(map)æ¥æ»¡è¶³ä¸šåŠ¡çš„éœ€æ±‚.å…¶å®å°±å¯ä»¥å½“ä½œæ˜¯Java8çš„<code>lambda</code>ç‰¹æ€§.</p>

<blockquote>
<p>Observableåœ¨ç»è¿‡æ“ä½œç¬¦å¤„ç†åè¿˜æ˜¯ä¸€ä¸ªObservable,å¯¹åº”ä¸Šè¿°çš„<strong>æµå¼é£æ ¼</strong></p>
</blockquote>

<p>æ¡ˆä¾‹: å‡è®¾æˆ‘ä»¬éœ€è¦ç›‘å¬é¼ æ ‡åœ¨ä¸€ä¸ªç›´è§’åæ ‡ç³»ä¸­çš„ç‚¹å‡»,å–å¾—æ‰€æœ‰åœ¨ç¬¬ä¸€è±¡é™ç‚¹å‡»çš„åæ ‡.</p>

<p><img src="https://i.loli.net/2019/08/22/eQnOjomU7IufBpk.png" alt="marble.png" /></p>

<p>ä»è¯¥æµç¨‹å›¾å¯ä»¥çœ‹å‡º,é¼ æ ‡ç‚¹å‡»åä¼šå‘å‡ºå¾ˆå¤šæ•°æ®,ä¸€æ¬¡ç‚¹å‡»ä¸€ä¸ªç‚¹,æˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œfilter,å¾—åˆ°äº†ä¸‹æ–¹æ—¶é—´è½´ä¸Šçš„æ•°æ®æº.è¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„.ä¸‹é¢æ¥çœ‹ä¸‹å¸¸ç”¨çš„æ“ä½œç¬¦æœ‰å“ªäº›?</p>

<h4 id="åˆ›å»ºå‹æ“ä½œç¬¦">åˆ›å»ºå‹æ“ä½œç¬¦</h4>

<blockquote>
<p>ç”¨äºåˆ›å»ºObservableå¯¹è±¡çš„æ“ä½œç¬¦</p>
</blockquote>

<h5 id="create">Create</h5>

<p>åˆ›å»ºä¸€ä¸ªObservable,éœ€è¦ä¼ é€’ä¸€ä¸ª<code>Function</code>æ¥å®Œæˆè°ƒç”¨Observerçš„é€»è¾‘.</p>

<p>ä¸€ä¸ªæ ‡å‡†çš„Observableå¿…é¡»åªèƒ½è°ƒç”¨ä¸€æ¬¡(<strong>Exactly Once</strong>)<code>onCompleted</code>æˆ–è€…<code>onError</code>,å¹¶ä¸”åœ¨è°ƒç”¨åä¸èƒ½å†è°ƒç”¨Observerçš„å…¶ä»–æ–¹æ³•(eg: onNext).</p>

<p><strong>sample code</strong></p>

<pre><code class="language-java">Observable.create(new Observable.OnSubscribe&lt;Integer&gt;() {
    @Override
    public void call(Subscriber&lt;? super Integer&gt; observer) {
        try {
            if (!observer.isUnsubscribed()) {
                for (int i = 1; i &lt; 5; i++) {
                    observer.onNext(i);
                }
                observer.onCompleted();
            }
        } catch (Exception e) {
            observer.onError(e);
        }
    }
 } ).subscribe(new Subscriber&lt;Integer&gt;() {
        @Override
        public void onNext(Integer item) {
            System.out.println(&quot;Next: &quot; + item);
        }

        @Override
        public void onError(Throwable error) {
            System.err.println(&quot;Error: &quot; + error.getMessage());
        }

        @Override
        public void onCompleted() {
            System.out.println(&quot;Sequence complete.&quot;);
        }
    });
</code></pre>

<pre><code class="language-bash">Next: 1
Next: 2
Next: 3
Next: 4
Sequence complete.
</code></pre>

<h5 id="defer">Defer</h5>

<p>ç›´åˆ°æœ‰Observerè®¢é˜…æ—¶æ‰ä¼šåˆ›å»º,å¹¶ä¸”ä¼šä¸ºæ¯ä¸€ä¸ªObserveråˆ›å»ºæ–°çš„Observable,è¿™æ ·å¯ä»¥ä¿è¯æ‰€æœ‰Observerå¯ä»¥çœ‹åˆ°ç›¸åŒçš„æ•°æ®,å¹¶ä¸”ä»å¤´å¼€å§‹æ¶ˆè´¹.</p>

<p><strong>sample code</strong></p>

<pre><code class="language-java">Observable&lt;String&gt; defer = Observable.defer(new Func0&lt;Observable&lt;String&gt;&gt;() {
    @Override
    public Observable&lt;String&gt; call() {
        return Observable.just(&quot;Hello&quot;, &quot;World&quot;);
    }
});

defer.subscribe(new Subscriber&lt;String&gt;() {
    @Override
    public void onCompleted() {
        System.out.println(&quot;ç¬¬ä¸€ä¸ªè®¢é˜…å®Œæˆå•¦~&quot;);
    }

    @Override
    public void onError(Throwable e) {
        System.out.println(&quot;ç¬¬ä¸€ä¸ªè®¢é˜…æŠ¥é”™å•¦~&quot;);
    }

    @Override
    public void onNext(String s) {
        System.out.println(&quot;ç¬¬ä¸€ä¸ªè®¢é˜…æ”¶åˆ°:&quot; + s);
    }
});

defer.subscribe(new Subscriber&lt;String&gt;() {
		//ä¸ä¸Šä¸€ä¸ªè®¢é˜…é€»è¾‘ç›¸åŒ
});

</code></pre>

<pre><code class="language-bash">ç¬¬ä¸€ä¸ªè®¢é˜…æ”¶åˆ°:Hello
ç¬¬ä¸€ä¸ªè®¢é˜…æ”¶åˆ°:World
ç¬¬ä¸€ä¸ªè®¢é˜…å®Œæˆå•¦~
ç¬¬äºŒä¸ªè®¢é˜…æ”¶åˆ°:Hello
ç¬¬äºŒä¸ªè®¢é˜…æ”¶åˆ°:World
ç¬¬äºŒä¸ªè®¢é˜…å®Œæˆå•¦~
</code></pre>

<p><strong>Note:</strong></p>

<p>Deferåœ¨RxJavaä¸­çš„å®ç°å…¶å®æœ‰ç‚¹åƒæŒ‡æ´¾,å¯ä»¥çœ‹åˆ°æ„å»ºæ—¶,ä¼ å‚ä¸º<code>Func0&lt;Observable&lt;T&gt;&gt;</code>,ObserverçœŸæ­£è®¢é˜…çš„æ˜¯ä¼ å‚ä¸­çš„Observable.</p>

<h5 id="just">Just</h5>

<p>åœ¨ä¸Šæ–‡<code>Defer</code>ä¸­ä»£ç ä¸­å°±ç”¨äº†<code>Just</code>,æŒ‡çš„æ˜¯å¯ä»¥å‘é€ç‰¹å®šçš„æ•°æ®.ä»£ç ä¸€è‡´å°±ä¸ä½œå±•ç¤ºäº†.</p>

<h5 id="interval">Interval</h5>

<p>å¯ä»¥æŒ‰ç…§æŒ‡å®šæ—¶é—´é—´éš”ä»0å¼€å§‹å‘é€æ— é™é€’å¢åºåˆ—.</p>

<h6 id="å‚æ•°">å‚æ•°</h6>

<ul>
<li>initalDelay   å»¶è¿Ÿå¤šé•¿æ—¶é—´å¼€å§‹ç¬¬ä¸€æ¬¡å‘é€</li>
<li>period          æŒ‡å®šæ—¶é—´é—´éš”</li>
<li>unit               æ—¶é—´å•ä½</li>
</ul>

<p>å¦‚ä¸‹ä¾‹å­:å»¶è¿Ÿ0ç§’åå¼€å§‹å‘é€,æ¯1ç§’å‘é€ä¸€æ¬¡. å› ä¸ºsleep 100ç§’,ä¼šå‘é€0-99ç»ˆæ­¢</p>

<p><strong>sample code</strong></p>

<pre><code class="language-java">Observable.interval(0,1,TimeUnit.SECONDS).subscribe(new Action1&lt;Long&gt;() {
  	// è¿™é‡Œåªå®ç°äº†OnNextæ–¹æ³•,onErrorå’ŒonCompletedå¯ä»¥æœ‰é»˜è®¤å®ç°.ä¸€ç§å·æ‡’å†™æ³•
    @Override
    public void call(Long aLong) {
        System.out.println(aLong);
    }
});
try {
  	//é˜»å¡å½“å‰çº¿ç¨‹ä½¿ç¨‹åºä¸€ç›´è·‘
    TimeUnit.SECONDS.sleep(100);
} catch (InterruptedException e) {
    e.printStackTrace();
}
</code></pre>

<h4 id="è½¬æ¢æ“ä½œç¬¦">è½¬æ¢æ“ä½œç¬¦</h4>

<blockquote>
<p>å°†Observableå‘å‡ºçš„æ•°æ®è¿›è¡Œå„ç±»è½¬æ¢çš„æ“ä½œç¬¦</p>
</blockquote>

<h5 id="buffer">Buffer</h5>

<p><img src="https://i.loli.net/2019/08/22/IC3vbhSDGgUYku5.png" alt="buffer.png" /></p>

<p>å¦‚ä¸Šå›¾æ‰€ç¤º,bufferå®šæœŸå°†æ•°æ®æ”¶é›†åˆ°é›†åˆä¸­,å¹¶å°†é›†åˆæ‰“åŒ…å‘é€.</p>

<p><strong>sample code</strong></p>

<pre><code class="language-java">Observable.just(2,3,5,6)
        .buffer(3)
        .subscribe(new Action1&lt;List&lt;Integer&gt;&gt;() {
            @Override
            public void call(List&lt;Integer&gt; integers) {
                System.out.println(integers);
            }
        });
</code></pre>

<pre><code class="language-bash">[2, 3, 5]
[6]
</code></pre>

<p><strong>Window</strong></p>

<p>windowå’Œbufferæ˜¯éå¸¸åƒçš„ä¸¤ä¸ªæ“ä½œç¬¦,åŒºåˆ«åœ¨äºbufferä¼šå°†å­˜èµ·æ¥çš„itemæ‰“åŒ…å†å‘å‡ºå»,è€Œwindowåˆ™åªæ˜¯å•çº¯çš„å°†itemå †èµ·æ¥,è¾¾åˆ°é˜ˆå€¼å†å‘å‡ºå»,ä¸å¯¹åŸæ•°æ®ç»“æ„åšä¿®æ”¹.</p>

<p><img src="https://i.loli.net/2019/08/22/kqIb5j6xfPDdOZn.png" alt="window.png" /></p>

<p><strong>sample code</strong></p>

<pre><code class="language-java">Observable.just(2,3,5,6)
        .window(3)
        .subscribe(new Action1&lt;Observable&lt;Integer&gt;&gt;() {
            @Override
            public void call(Observable&lt;Integer&gt; integerObservable) {
                integerObservable.subscribe(new Action1&lt;Integer&gt;() {
                    @Override
                    public void call(Integer integer) {
                        // do anything
                    }
                });
            }
        });
</code></pre>

<h4 id="åˆå¹¶æ“ä½œç¬¦">åˆå¹¶æ“ä½œç¬¦</h4>

<blockquote>
<p>å°†å¤šä¸ªObservableåˆå¹¶ä¸ºä¸€ä¸ªçš„æ“ä½œç¬¦</p>
</blockquote>

<h5 id="zip">Zip</h5>

<p>ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ç»„åˆå¤šä¸ªObservableå‘å°„çš„æ•°æ®é›†åˆï¼Œç„¶åå†å‘å°„è¿™ä¸ªç»“æœã€‚å¦‚æœå¤šä¸ªObservableå‘å°„çš„æ•°æ®é‡ä¸ä¸€æ ·ï¼Œåˆ™ä»¥æœ€å°‘çš„Observableä¸ºæ ‡å‡†è¿›è¡Œç»„åˆ.</p>

<p><img src="https://i.loli.net/2019/08/22/Nu4TCMEHKGA3Y1V.png" alt="zip.png" /></p>

<p><strong>sample code</strong></p>

<pre><code class="language-java">Observable&lt;Integer&gt;  observable1=Observable.just(1,2,3,4);
Observable&lt;Integer&gt;  observable2=Observable.just(4,5,6);
Observable.zip(observable1, observable2, new Func2&lt;Integer, Integer, String&gt;() {
    @Override
    public String call(Integer item1, Integer item2) {
        return item1+&quot;and&quot;+item2;
    }
}).subscribe(new Action1&lt;String&gt;() {
    @Override
    public void call(String s) {
        System.out.println(s);
    }
}); 
</code></pre>

<pre><code class="language-bash">1and4
2and5
3and6
</code></pre>

<h4 id="èƒŒå‹æ“ä½œç¬¦">èƒŒå‹æ“ä½œç¬¦</h4>

<blockquote>
<p>ç”¨äºå¹³è¡¡Observeræ¶ˆè´¹é€Ÿåº¦,Observableç”Ÿäº§é€Ÿåº¦çš„æ“ä½œç¬¦</p>
</blockquote>

<p>èƒŒå‹æ˜¯æŒ‡åœ¨å¼‚æ­¥åœºæ™¯ä¸­,è¢«è§‚å¯Ÿè€…å‘é€äº‹ä»¶é€Ÿåº¦è¿œå¿«äºè§‚å¯Ÿè€…çš„å¤„ç†é€Ÿåº¦çš„æƒ…å†µä¸‹ï¼Œä¸€ç§å‘Šè¯‰ä¸Šæ¸¸çš„è¢«è§‚å¯Ÿè€…é™ä½å‘é€é€Ÿåº¦çš„ç­–ç•¥.ä¸‹å›¾å¯ä»¥å¾ˆå¥½é˜é‡ŠèƒŒå‹æœºåˆ¶æ˜¯å¦‚ä½•è¿è¡Œçš„.</p>

<p><img src="https://i.loli.net/2019/09/02/4TyQFgBkIAO1R2c.png" alt="backpressure.png" /></p>

<p>å®—æ—¨å°±æ˜¯<strong>ä¸‹æ¸¸å‘Šè¯‰ä¸Šæ¸¸æˆ‘èƒ½å¤„ç†å¤šå°‘ä½ å°±ç»™æˆ‘å‘å¤šå°‘.</strong></p>

<pre><code class="language-java">//è¢«è§‚å¯Ÿè€…å°†äº§ç”Ÿ100000ä¸ªäº‹ä»¶
Observable observable=Observable.range(1,100000);
observable.observeOn(Schedulers.newThread())
        .subscribe(new Subscriber() {
            @Override
            public void onCompleted() {

            }
            @Override
            public void onError(Throwable e) {

            }
            @Override
            public void onNext(Object o) {
                try {
                    TimeUnit.SECONDS.sleep(1);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
              	System.out.println(&quot;on Next Request...&quot;);
                request(1);
            }
        });
</code></pre>

<h5 id="èƒŒå‹æ”¯æŒ">èƒŒå‹æ”¯æŒ</h5>

<p>ä¸Šè¿°æ ·ä¾‹ä»£ç ä¸­åˆ›å»ºObservableä½¿ç”¨çš„æ˜¯<code>range</code>æ“ä½œç¬¦,è¿™æ˜¯å› ä¸ºä»–æ˜¯æ”¯æŒèƒŒå‹çš„,å¦‚æœç”¨<code>interval</code>,requestçš„æ–¹æ³•å°†ä¸èµ·ä½œç”¨.å› ä¸º<code>interval</code>ä¸æ”¯æŒèƒŒå‹.é‚£ä»€ä¹ˆæ ·çš„Observableæ”¯æŒèƒŒå‹å‘¢?</p>

<p>åœ¨å‰é¢ä»‹ç»æ¦‚å¿µæ—¶,æœ‰æåˆ°è¿‡<code>Hot</code>&amp;<code>Cold</code>çš„åŒºåˆ«,<code>Hot</code>ç±»å‹çš„Observable,å³ä¸€ç»åˆ›å»ºå°±å¼€å§‹å‘é€,<strong>ä¸æ”¯æŒ</strong>èƒŒå‹,<code>Cold</code>ç±»å‹çš„Observableä¹Ÿåªæ˜¯<strong>éƒ¨åˆ†</strong>æ”¯æŒ.</p>

<h5 id="onbackpressurebuffer-onbackpressuredrop">onBackpressurebuffer/onBackpressureDrop</h5>

<p>ä¸æ”¯æŒèƒŒå‹çš„æ“ä½œç¬¦æˆ‘ä»¬å¯ä»¥å¦‚ä½•å®ç°èƒŒå‹å‘¢?å°±é€šè¿‡<code>onBackpressurebuffer/onBackpressureDrop</code>æ¥å®ç°.é¡¾åæ€ä¹‰ä¸€ä¸ªæ˜¯ç¼“å­˜,ä¸€ä¸ªæ˜¯ä¸¢å¼ƒ.</p>

<p>è¿™é‡Œä»¥<code>drop</code>æ–¹å¼æ¥å±•ç¤º.</p>

<pre><code class="language-java">Observable.interval(1, TimeUnit.MILLISECONDS)
  .onBackpressureDrop()
  //æŒ‡å®šobserverè°ƒåº¦ioçº¿ç¨‹ä¸Š,å¹¶å°†ç¼“å­˜sizeç½®ä¸º1,è¿™ä¸ªç¼“å­˜ä¼šæå‰å°†æ•°æ®å­˜å¥½åœ¨æ¶ˆè´¹,
  //é»˜è®¤åœ¨PCä¸Šæ˜¯128,è®¾ç½®å°ä¸€ç‚¹å¯ä»¥å¿«é€Ÿçš„çœ‹åˆ°dropçš„æ•ˆæœ
  .observeOn(Schedulers.io(), 1)
  .subscribe(new Subscriber&lt;Long&gt;() {
    @Override
    public void onCompleted() {

    }

    @Override
    public void onError(Throwable e) {
      System.out.println(&quot;Error:&quot; + e.getMessage());
    }

    @Override
    public void onNext(Long aLong) {
      System.out.println(&quot;è®¢é˜… &quot; + aLong);
      try {
        TimeUnit.MILLISECONDS.sleep(100);
      } catch (InterruptedException e) {
        e.printStackTrace();
      }
    }
 	})
</code></pre>

<pre><code class="language-bash">è®¢é˜… 0
è®¢é˜… 103
è®¢é˜… 207
è®¢é˜… 300
è®¢é˜… 417
è®¢é˜… 519
è®¢é˜… 624
è®¢é˜… 726
è®¢é˜… 827
è®¢é˜… 931
è®¢é˜… 1035
è®¢é˜… 1138
è®¢é˜… 1244
è®¢é˜… 1349
</code></pre>

<p>å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹å‡ºå¾ˆå¤šæ•°æ®è¢«ä¸¢æ‰äº†,è¿™å°±æ˜¯èƒŒå‹çš„æ•ˆæœ.</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>å†™äº†è¿™ä¹ˆå¤šå,æƒ³æ¥è¯´è¯´è‡ªå·±çš„æ„Ÿå—.</p>

<ol>
<li>è½¬å˜æ€æƒ³: å“åº”å¼ç¼–ç¨‹çš„æ€æƒ³è·Ÿæˆ‘ä»¬ç°åœ¨åç«¯å¼€å‘æ€è·¯æ˜¯æœ‰åŒºåˆ«çš„.å¯èƒ½åˆšå¼€å§‹ä¼šä¸é€‚åº”.</li>
<li>ä¸æ˜“è°ƒè¯•: æµå¼é£æ ¼å†™ç€çˆ½,è°ƒç€éš¾</li>
</ol>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<p><a href="http://reactivex.io/documentation/">ReactiveXå®˜ç½‘</a></p>

<p><a href="https://zhuanlan.zhihu.com/p/24473022">å…³äºRxJavaæœ€å‹å¥½çš„æ–‡ç« â€”â€”èƒŒå‹ï¼ˆBackpressure)</a></p>

<p><a href="http://zhangtielei.com/posts/blog-rxjava-backpressure.html">å¦‚ä½•å½¢è±¡åœ°æè¿°RxJavaä¸­çš„èƒŒå‹å’Œæµæ§æœºåˆ¶ï¼Ÿ</a></p>
    </div>
  </article>
<section id="comments">
</section>

</div><nav class="bar bar-footer clearfix" data-stick-bottom>
    <div class="bar-inner">
        <ul class="pager pull-left">
            <li class="prev">
                <a href="https://xiaohei.im/2019/08/189-rotate-array/" title="[LeetCode In Rust]189-Rotate Array"><i
                        class="icon icon-angle-left"
                        aria-hidden="true"></i><span>&nbsp;&nbsp;ä¸Šä¸€ç¯‡</span></a>
            </li>
            <li class="next">
                <a href="https://xiaohei.im/2019/08/rxjava-in-hystrix/"
                    title="Hystrixå‘½ä»¤æ‰§è¡Œæµç¨‹"><span>ä¸‹ä¸€ç¯‡&nbsp;&nbsp;</span><i
                        class="icon icon-angle-right" aria-hidden="true"></i></a>
            </li>
            
            <li class="toggle-toc">
                <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false"
                    title="æ–‡ç« ç›®å½•" role="button">
                    <span>[&nbsp;</span><span>æ–‡ç« ç›®å½•</span>
                    <i class="text-collapsed icon icon-anchor"></i>
                    <i class="text-in icon icon-close"></i>
                    <span>]</span>
                </a>
            </li>
        </ul>
        
        <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal"
            data-target="#donateModal"><span>èµ</span></button>
        
        <div class="bar-right">
            <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter"
                data-mobile-sites="weibo,qq,qzone"></div>
        </div>
    </div>
</nav>

<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content donate">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                    aria-hidden="true">&times;</span></button>
            <div class="modal-body">
                <div class="donate-box">
                    <div class="donate-head">
                        <p>æ„Ÿè°¢æ‚¨çš„æ”¯æŒ,æˆ‘ä¼šç»§ç»­åŠªåŠ›çš„!</p>
                    </div>
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane fade active in" id="alipay">
                            <div class="donate-payimg">
                                <img src="https://xiaohei.im/donate/alipayimg.png"
                                    alt="æ‰«ç æ”¯æŒ" title="æ‰«ä¸€æ‰«" />
                            </div>
                            <p class="text-muted mv">æ‰«ç æ‰“èµ, å¤šå°‘ä½ è¯´äº†ç®—~</p>
                            <p class="text-grey">æ‰“å¼€æ”¯ä»˜å®æ‰«ä¸€æ‰«ï¼Œå³å¯è¿›è¡Œæ‰«ç æ‰“èµå“¦~</p>
                        </div>
                        <div role="tabpanel" class="tab-pane fade" id="wechatpay">
                            <div class="donate-payimg">
                                <img src="https://xiaohei.im/donate/wechatpayimg.png"
                                    alt="æ‰«ç æ”¯æŒ" title="æ‰«ä¸€æ‰«" />
                            </div>
                            <p class="text-muted mv">æ‰«ç æ‰“èµ, å¤šå°‘ä½ è¯´äº†ç®—~</p>
                            <p class="text-grey">æ‰“å¼€å¾®ä¿¡æ‰«ä¸€æ‰«ï¼Œå³å¯è¿›è¡Œæ‰«ç æ‰“èµå“¦</p>
                        </div>
                    </div>
                    <div class="donate-footer">
                        <ul class="nav nav-tabs nav-justified" role="tablist">
                            <li role="presentation" class="active">
                                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay"
                                    aria-expanded="true"><i class="icon icon-alipay"></i> æ”¯ä»˜å®</a>
                            </li>
                            <li role="presentation" class="">
                                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab"
                                    aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i>
                                    å¾®ä¿¡æ”¯ä»˜</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
<ul class="social-links">
    <li><a href="https://github.com/xiaoheiAh" target="_blank" title="github" data-toggle=tooltip data-placement=top >
            <i class="icon icon-github"></i></a></li>
    <li><a href="https://xiaohei.im/index.xml" target="_blank" title="rss" data-toggle=tooltip data-placement=top >
            <i class="icon icon-rss"></i></a></li>
</ul>
  <div class="copyright">
    &copy;2017  -
    2019
    <div class="publishby">
        Theme by <a href="https://github.com/xiaoheiAh" target="_blank"> xiaoheiAh </a>base on<a href="https://github.com/xiaoheiAh/hugo-theme-pure" target="_blank"> pure</a>.
    </div>
  </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
   window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/rust.min.js"></script>
<script type="text/javascript"
   src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script>
hljs.configure({
  tabReplace: '    ', 
  classPrefix: ''     
                      
})
hljs.initHighlightingOnLoad();
</script>
<script type="text/javascript" src="https://xiaohei.im/js/application.js"></script>
<script type="text/javascript" src="https://xiaohei.im/js/plugin.js"></script>
<script>
      (function (window) {
          var INSIGHT_CONFIG = {
              TRANSLATION: {
                  POSTS: 'æ–‡ç« ',
                  PAGES: 'é¡µé¢',
                  CATEGORIES: 'åˆ†ç±»',
                  TAGS: 'æ ‡ç­¾',
                  UNTITLED: '(æœªå‘½å)',
              },
              ROOT_URL: 'https:\/\/xiaohei.im\/',
              CONTENT_URL: 'https:\/\/xiaohei.im\/searchindex.json ',
          };
          window.INSIGHT_CONFIG = INSIGHT_CONFIG;
      })(window);
      </script>
<script type="text/javascript" src="https://xiaohei.im/js/insight.js"></script>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: 'e38fc798c72a7e4e1386',
        clientSecret: 'e151aa3b7b98d3cfaa1f096b88fdd7897e2c8007',
        repo: 'xiaoheiAh.github.io',
        owner: 'xiaoheiAh',
        admin: ['xiaoheiAh'],
        id: md5(location.pathname),
        distractionFreeMode: true
    });
    gitalk.render('comments');
</script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-98254666-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </body>
</html>
